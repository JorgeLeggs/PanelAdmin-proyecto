<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Editar unidad</title>
    <link
      href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css"
      rel="stylesheet"
    />
    <link href="./CSS/style.css" rel="stylesheet" />
    <link href="./css/bootstrap.css" rel="stylesheet" />
    <link rel="stylesheet" href="./css/modal.css" />
    <script
      src="https://use.fontawesome.com/releases/v6.1.0/js/all.js"
      crossorigin="anonymous"
    ></script>
  </head>

  <script>
    function mostrarRT() {
      var datosreal = firebase.database().ref("/camion1");
      datosreal.on("value", (snapshot) => {
        const datos = snapshot.val();

        localStorage.setItem("id", datos.nombre);
        localStorage.setItem("estado", datos.estado);
        localStorage.setItem("ruta", datos.ruta);
        localStorage.setItem("tipo", datos.tipo);

        console.log(datos);
      });
    }

    //function to update data in realtime database firebase
    function updateData() {
      var datoscamion = {
        nombre: document.getElementById("nombre").value,
        ruta: document.getElementById("ruta").value,
        tipo: document.getElementById("tipo").value,
        estado: document.getElementById("estado").value,
      };

      firebase.database().ref("/camion1").set(datoscamion);
      location.href = "./principal.html";
    }
  </script>

  <body class="sb-nav-fixed" onload="mostrarRT()">
    <a class="btn btn btn-warning offset-1 mt-4" href="./editar.html">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="icon icon-tabler icon-tabler-arrow-left"
        width="40"
        height="40"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="#000000"
        fill="none"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
        <line x1="5" y1="12" x2="19" y2="12" />
        <line x1="5" y1="12" x2="11" y2="18" />
        <line x1="5" y1="12" x2="11" y2="6" />
      </svg>
    </a>

    <div class="container mt-4">
      <!-- Modal content -->
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="m-3">Editar Unidad</h2>
        </div>
        <div class="modal-body">
          <form id="form" class="d-block">
            <div class="mb-3">
              <label for="content">Nombre de la unidad</label>
              <input
                required
                type="text"
                name="nombre"
                class="form-control"
                id="nombre"
                aria-describedby="emailHelp"
              />
              <span class="help-block text-danger" id="content-span"></span>
            </div>

            <div class="mb-3">
              <label for="type">Tipo</label>
              <select
                class="form-select"
                value=""
                name="tipo"
                id="tipo"
                aria-label="Default select example"
              >
                <option value="colectivo">Colectivo</option>
                <option value="urbano">Urbano</option>
              </select>

              <span class="help-block text-danger" id="state-span"></span>
            </div>

            <div class="mb-3">
              <label for="type">Ruta</label>
              <select
                class="form-select"
                value=""
                name="ruta"
                id="ruta"
                aria-label="Default select example"
              >
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
              </select>

              <span class="help-block text-danger" id="state-span"></span>
            </div>

            <div class="mb-3">
              <label for="type">Estado</label>
              <select
                class="form-select"
                value=""
                name="estado"
                id="estado"
                aria-label="Default select example"
              >
                <option value="1">Activo</option>
                <option value="0">Mantenimiento</option>
                <option value="0">Fuera de servicio</option>
              </select>

              <span class="help-block text-danger" id="state-span"></span>
            </div>

            <span class="help-block text-danger" id="state-span"></span>
          </form>
        </div>

        <div class="d-flex justify-content-center">
          <button
            class="btn btn-primary mb-3"
            type="submit"
            onclick="updateData()"
          >
            Actualizar
          </button>
        </div>
      </div>
    </div>

    <div class="mt-4">
      <p>&nbsp</p>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <script src="./js/config.js" type="module"></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      crossorigin="anonymous"
    ></script>
    <script src="js/scripts.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"
      crossorigin="anonymous"
    ></script>
    <script src="assets/demo/chart-area-demo.js"></script>
    <script src="assets/demo/chart-bar-demo.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/simple-datatables@latest"
      crossorigin="anonymous"
    ></script>
    <script src="js/datatables-simple-demo.js"></script>
  </body>
</html>
